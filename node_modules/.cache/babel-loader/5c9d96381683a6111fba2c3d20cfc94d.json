{"ast":null,"code":"import { createAction, handleActions } from 'redux-actions';\nimport { produce } from 'immer';\nimport { api } from '../../shared/api';\nconst GET_PRODUCTS = 'GET_PRODUCTS';\nconst LOADING = 'LOADING';\nconst getProducts = createAction(GET_PRODUCTS, products => ({\n  products\n}));\nconst loading = createAction(LOADING, isLoading => ({\n  isLoading\n}));\nconst initialState = {\n  products: [] // list: [\n  // \t{\t\n  // \t\tpostId: \"postId\",\n  // \t\ttitle: '[올리타리아] 엑스트라 버진 올리브유',\n  // \t\timg: 'https://img-cf.kurly.com/shop/data/goods/1587519777879l0.jpg',\n  // \t\tprice: 15000,\n  // \t},\n  // ]\n\n};\n\nconst getProductsMiddleWare = () => {\n  // return dispatch => {\n  // \tdispatch(loading(true));\n  // \tapi\n  // \t\t.get('page/main/new')\n  // \t\t.then(\n  // \t\t\tres => {\n  // \t\t\t\tconst products = res.sortByNew;\n  // \t\t\t\t// const products = res.data.post;\n  // \t\t\t\t// const products = res.data.list\n  // \t\t\t\tdispatch(getProducts(products));\n  // \t\t\t},\n  // \t\t\t{ withCredentials: true },\n  // \t\t)\n  // \t\t.catch(err => {\n  // \t\t\tconsole.error(err);\n  // \t\t\tdispatch(loading(false));\n  // \t\t});\n  // };\n  return function (dispatch) {\n    api.get('/page/main/new').then(res => {\n      dispatch(getProducts(res.data));\n    }).catch(err => console.log(err));\n  };\n};\n\nexport default handleActions({\n  [GET_PRODUCTS]: (state, action) => produce(state, draft => {\n    draft.products = action.payload.products; // draft.sortByNew = action.payload.products;\n    // draft.isLoading = false;\n  }),\n  [LOADING]: (state, action) => produce(state, draft => {\n    draft.isLoading = action.payload.isLoading;\n  })\n}, initialState);\nconst actionCreators = {\n  getProducts,\n  getProductsMiddleWare\n};\nexport { actionCreators };","map":{"version":3,"sources":["/Users/jeonghwan/Desktop/Clonemk/clone_mk/clone_mk/src/redux/modules/product.js"],"names":["createAction","handleActions","produce","api","GET_PRODUCTS","LOADING","getProducts","products","loading","isLoading","initialState","getProductsMiddleWare","dispatch","get","then","res","data","catch","err","console","log","state","action","draft","payload","actionCreators"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,aAAvB,QAA4C,eAA5C;AACA,SAASC,OAAT,QAAwB,OAAxB;AAEA,SAASC,GAAT,QAAoB,kBAApB;AAEA,MAAMC,YAAY,GAAG,cAArB;AACA,MAAMC,OAAO,GAAG,SAAhB;AAEA,MAAMC,WAAW,GAAGN,YAAY,CAACI,YAAD,EAAeG,QAAQ,KAAK;AAC3DA,EAAAA;AAD2D,CAAL,CAAvB,CAAhC;AAGA,MAAMC,OAAO,GAAGR,YAAY,CAACK,OAAD,EAAUI,SAAS,KAAK;AACnDA,EAAAA;AADmD,CAAL,CAAnB,CAA5B;AAIA,MAAMC,YAAY,GAAG;AACpBH,EAAAA,QAAQ,EAAE,EADU,CAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAToB,CAArB;;AAYA,MAAMI,qBAAqB,GAAG,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAO,UAASC,QAAT,EAAmB;AACzBT,IAAAA,GAAG,CACFU,GADD,CACK,gBADL,EAECC,IAFD,CAEMC,GAAG,IAAE;AAEVH,MAAAA,QAAQ,CAACN,WAAW,CAACS,GAAG,CAACC,IAAL,CAAZ,CAAR;AACA,KALD,EAMCC,KAND,CAMOC,GAAG,IAAGC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CANb;AAOA,GARD;AASA,CA5BD;;AA8BA,eAAejB,aAAa,CAC3B;AACC,GAACG,YAAD,GAAgB,CAACiB,KAAD,EAAQC,MAAR,KACfpB,OAAO,CAACmB,KAAD,EAAQE,KAAK,IAAI;AACvBA,IAAAA,KAAK,CAAChB,QAAN,GAAiBe,MAAM,CAACE,OAAP,CAAejB,QAAhC,CADuB,CAEvB;AACA;AACA,GAJM,CAFT;AAOC,GAACF,OAAD,GAAW,CAACgB,KAAD,EAAQC,MAAR,KACVpB,OAAO,CAACmB,KAAD,EAAQE,KAAK,IAAI;AACvBA,IAAAA,KAAK,CAACd,SAAN,GAAkBa,MAAM,CAACE,OAAP,CAAef,SAAjC;AACA,GAFM;AART,CAD2B,EAa3BC,YAb2B,CAA5B;AAgBA,MAAMe,cAAc,GAAG;AACtBnB,EAAAA,WADsB;AAEtBK,EAAAA;AAFsB,CAAvB;AAKA,SAASc,cAAT","sourcesContent":["import { createAction, handleActions } from 'redux-actions';\nimport { produce } from 'immer';\n\nimport { api } from '../../shared/api';\n\nconst GET_PRODUCTS = 'GET_PRODUCTS';\nconst LOADING = 'LOADING';\n\nconst getProducts = createAction(GET_PRODUCTS, products => ({\n\tproducts,\n}));\nconst loading = createAction(LOADING, isLoading => ({\n\tisLoading,\n}));\n\nconst initialState = {\n\tproducts: [],\n\t// list: [\n\t// \t{\t\n\t// \t\tpostId: \"postId\",\n\t// \t\ttitle: '[올리타리아] 엑스트라 버진 올리브유',\n\t// \t\timg: 'https://img-cf.kurly.com/shop/data/goods/1587519777879l0.jpg',\n\t// \t\tprice: 15000,\n\t// \t},\n\t// ]\n};\n\nconst getProductsMiddleWare = () => {\n\t// return dispatch => {\n\t// \tdispatch(loading(true));\n\t// \tapi\n\t// \t\t.get('page/main/new')\n\t// \t\t.then(\n\t// \t\t\tres => {\n\t// \t\t\t\tconst products = res.sortByNew;\n\t// \t\t\t\t// const products = res.data.post;\n\t// \t\t\t\t// const products = res.data.list\n\t// \t\t\t\tdispatch(getProducts(products));\n\t// \t\t\t},\n\t// \t\t\t{ withCredentials: true },\n\t// \t\t)\n\t// \t\t.catch(err => {\n\t// \t\t\tconsole.error(err);\n\t// \t\t\tdispatch(loading(false));\n\t// \t\t});\n\t// };\n\treturn function(dispatch) {\n\t\tapi \n\t\t.get('/page/main/new')\n\t\t.then(res=>{\n\t\t  \n\t\t\tdispatch(getProducts(res.data));\n\t\t})\n\t\t.catch(err=> console.log(err));\n\t}\n};\n\nexport default handleActions(\n\t{\n\t\t[GET_PRODUCTS]: (state, action) =>\n\t\t\tproduce(state, draft => {\n\t\t\t\tdraft.products = action.payload.products;\n\t\t\t\t// draft.sortByNew = action.payload.products;\n\t\t\t\t// draft.isLoading = false;\n\t\t\t}),\n\t\t[LOADING]: (state, action) =>\n\t\t\tproduce(state, draft => {\n\t\t\t\tdraft.isLoading = action.payload.isLoading;\n\t\t\t}),\n\t},\n\tinitialState,\n);\n\nconst actionCreators = {\n\tgetProducts,\n\tgetProductsMiddleWare,\n};\n\nexport { actionCreators };"]},"metadata":{},"sourceType":"module"}